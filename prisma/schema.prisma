generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  // provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum StatutUtilisateur {
  actif
  abandon
  renvoyer
  decede
  suspendu
}

model Profil {
  id        Int      @id @default(autoincrement())
  libelle   String
  utilisateurs Utilisateur[]
}

model Utilisateur {
  id                Int      @id @default(autoincrement())
  nom               String
  prenom            String
  email             String   @unique
  password          String
  login             String   @unique
  statutUtilisateur String
  profilId          Int
  profil            Profil   @relation(fields: [profilId], references: [id])
}


model Promotion {
  id        Int       @id @default(autoincrement())
  date_debut DateTime
  duree     String

  // Relations
  referentiels Referentiel[]
}

model Referentiel {
  id          Int          @id @default(autoincrement())
  libelle     String
  description String?

  // Relations
  promotionId Int
  promotion   Promotion   @relation(fields: [promotionId], references: [id])
  profilsSortie ProfilSortie[]
}

model ProfilSortie {
  id                Int      @id @default(autoincrement())
  libelle           String
  description       String
  referentielId     Int
  referentiel       Referentiel @relation(fields: [referentielId], references: [id])
}


model Competence {
  id          Int       @id @default(autoincrement())
  libelle     String
  description String?

  // Relations
  niveaux Niveau[]
  tags    Tag[]
}

model Niveau {
  id       Int        @id @default(autoincrement())
  libelle  String

  // Relations
  competenceId Int
  competence   Competence @relation(fields: [competenceId], references: [id])
}

model Tag {
  id          Int        @id @default(autoincrement())
  libelle     String
  description String?

  // Relations
  competenceId Int
  competence   Competence @relation(fields: [competenceId], references: [id])
}


